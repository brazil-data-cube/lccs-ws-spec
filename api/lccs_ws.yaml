openapi: 3.0.0

info:
  description: >
    Land Cover Classification System Web Service. You can find out more about LCCS-WS at [https://github.com/brazil-data-cube/lccs-ws](https://github.com/brazil-data-cube/lccs-ws)

  version: '0.2.0'

  title: Land Cover Classification System Web Service

  contact:
    name: Fabiana Zioti
    email: fabi.zioti@gmail.com

  license:
    name: MIT
    url: 'https://opensource.org/licenses/MIT'

servers:
  - url: 'https://localhost/lccs-ws'
    description: Production server


paths:

  '/classification_systems':

    get:
      summary: List Classification Systems.
      description: Retrieve list of available classification systems avaliable on server.
      responses:
        '200':
          description: Array of classification systems.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClassificationSystemsList'

  '/{name}':

    parameters:
       - $ref: '#/components/parameters/Classification_System_Name'

    get:
      summary: Retrives metadata of classification system by name.
      description: Returns information of classification system by name.
      operationId: getClassificationSysByName
      responses:
        200:
          description: Classification System metadata
          content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ClassificationSystemDescription'
    delete:
      summary: Deletes the classification system with the specified name.
      responses:
        '204':
          description: Classification System was deleted.
        '400':
          description: Invalid Name supplied
        '404':
          description: Classification System not found

  '/{name}/{class_name}':

    parameters:
      - $ref: '#/components/parameters/Classification_System_Name'
      - $ref: '#/components/parameters/Class_Name'

    get:
      summary: Retrives metadata of class by name.
      description: Returns information of class by name.
      operationId: getClassificationSysClassByName
      responses:
        200:
          description: Class metadata
          content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ClassificationSystemClassDescription'


  '/classification_systems_mappings/{class_name_source}/{class_name_target}':

     parameters:
        - name: class_name_source
          in: path
          description: Source Classification System Class Name
          required: true
          schema:
            type: string

        - name: class_name_target
          in: path
          description: Target Classification System Class Name
          required: true
          schema:
            type: string

     get:
      summary: Retrives classification systems mappings
      description: Returns information of classification systems mappings.
      operationId: getClassificationSysMapping
      responses:
        200:
          description: Classification Systems Mappings
          content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ClassificationSystemMapping'




components:

  #-------------------------------
  # Reusable operation parameters
  #-------------------------------

  parameters:

    Classification_System_Name:
      in: path
      name: name
      required: true
      description: Classification System Name
      schema:
        type: string

    Class_Name:
      in: path
      name: class_name
      required: true
      description: Class Name
      schema:
        type: string

  #-------------------------------
  # Reusable schemas (data models)
  #-------------------------------

  schemas:

    ClassificationSystemsList:
      type: object
      properties:
        classification_systems:
          type: array
          items:
            type: string

    ClassificationSystemDescription:
      type: object
      required:
        - name
      properties:
        id:
          type: number
        name:
          type: string
        authority_name:
          type: string
        description:
          type: string
        version:
          type: string
        classes:
          type: array
          items:
            type: object
            properties:
              id:
                type: number
              name:
                type: string

    ClassificationSystemClassDescription:
      type: object
      required:
        - name
      properties:
        id:
          type: number
        name:
          type: string
        code:
          type: string
        description:
          type: string
        style:
          type: string
        parent:
          type: object
          properties:
            id:
              type: number
            name:
              type: string


    ClassificationSystemMapping:
      type: array
      items:
            type: object
            properties:
              source_class_id:
                type: number
              source_class_name:
                type: string
              target_class_id:
                type: number
              target_class_name:
                type: string
              description:
                type: string
              degree_of_similarity:
                type: number